<template name="feedItem">
  {{#with this}}
    <div class="feed-item" id="{{_id}}">
      <div class="inner">
        <div class="activity {{#if typeIs "story"}}story{{/if}}">
          {{#if typeIs "story"}}
            {{> storyFeedContent}}
          {{else}}
            {{> shortContent}}
          {{/if}}
        </div>
        {{> feedItemActions}}
        {{> feedItemComments}}
      </div>
    </div>
  {{/with}}
</template>

<template name="feedItemActions">
  <div class="item-actions">
    <div class="show-comments">
      {{#if hasComments}}
        <a class="comments" href="#">{{countText}}</a>
      {{else}}
        <span class="comments">{{countText}}</span>
      {{/if}}
    </div>
    <div class="main-actions">
      <div class="action new-comment">
        <a href="#" class="{{#unless currentUser}}disabled{{/unless}}">
          <span {{#unless currentUser}}data-tooltip class="tip-top" title="Log in to comment"{{/unless}}>
            Comment
          </span>
        </a>
      </div>
    </div>
  </div>
</template>

<template name="feedItemComments">
  <div class="short-comments">
    <div class="inner">
      {{> commentList this}}
    </div>
  </div>
  <div class="comments-notice">
    <div class="inner"></div>
  </div>
  {{> commentForm this}}
</template>